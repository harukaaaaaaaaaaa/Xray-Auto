### Xray Auto Installer v0.3 更新日志

v0.3 版本在 **交互体验**、**自定义配置** 以及 **系统稳定性** 上做了重大升级，不再仅仅是全自动脚本，而是允许用户深度参与配置。**v0.3 将脚本从一个“傻瓜式固定配置工具”升级为了一个“灵活的可视化部署工具”。** 它既保留了适合新手的自动默认设置（通过倒计时实现），又为进阶用户提供了修改端口和域名的自由。

#### 1. 🖥️ 全新的交互与倒计时机制 (核心变化)
* **v0.2**: 几乎全自动运行，使用硬编码的默认值，用户无法干预。
* **v0.3**: 引入了 `wait_with_countdown` 函数。
    * **倒计时默认**: 如果用户在倒计时内（如 5 秒）无操作，脚本自动应用推荐设置。
    * **手动干预**: 按下任意键可暂停倒计时，进入手动输入模式，修改默认值。

#### 2. ⚙️ 全局端口自定义管理
* **v0.2**:
    * 端口被硬编码固定：Vision 使用 **443**，xhttp 使用 **8443**。
    * SSH 端口虽然会自动检测，但在安装过程中无法修改。
* **v0.3**:
    * **支持自定义**: 用户可以手动输入想要的 **SSH 端口**、**Vision 端口** 和 **xhttp 端口**。
    * **端口占用检测**: 脚本现在会通过 `ss -tuln` 检测端口状态，并直观显示“被占用 (红色)”或“空闲 (绿色)”，防止安装后启动失败。

#### 3. 🔍 增强版 SNI (伪装域) 优选
* **v0.2**:
    * 后台静默测试延迟，自动选择延迟最低的域名，用户不可见也不可控。
* **v0.3**:
    * **可视化列表**: 使用格式化表格列出所有备选域名及其具体延迟 (ms)。
    * **手动选择**: 用户可以根据序号 (1-N) 手动指定伪装域名。
    * **自定义域名**: 新增了 **Option 0**，允许用户输入自己想要使用的任意伪装域名（Custom Domain）。
    * **域名库扩展**: 增加了 `www.tesla.com` 和 `dl.google.com`。

#### 4. 🛠️ 系统自愈与强力预检
* **v0.2**: 仅包含简单的删除锁文件 (`rm lock`) 操作。
* **v0.3**: 新增 `pre_flight_check` 函数。
    * 使用 `dpkg --audit` 检查系统健康度。
    * 如果发现数据库损坏，会执行更激进的清理和修复操作 (kill 进程, 清理 dpkg updates 等)。
    * 增加了安装失败后的重试机制。

#### 5. ℹ️ 新增 `info` 快捷指令
* **v0.2**: 仅在脚本运行结束时显示一次连接信息和二维码。
* **v0.3**: 会生成一个永久的脚本文件 `/usr/local/bin/info`。
    * 用户可以在终端随时输入 `info` 命令，重新查看节点链接、配置参数和二维码。

#### 6. 🎨 视觉体验优化
* **v0.2**: 普通文本输出。
* **v0.3**:
    * 大量使用 `printf` 进行文本对齐，输出更整洁。
    * 增加了背景色（如红底白字）来提示重要警告或倒计时状态。


